<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công cụ tính GPA Pro</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --bg-color: #f8fafc;
            --white: #ffffff;
            --border: #e2e8f0;
            --text: #334155;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text);
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            font-size: 15px;
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        button:hover { transform: translateY(-1px); box-shadow: 0 4px 6px rgba(0,0,0,0.15); }
        button:active { transform: translateY(0); }

        .btn-add-sem { background-color: var(--primary-color); color: white; }
        .btn-reset { background-color: var(--danger); color: white; }
        .btn-add-subject { background-color: var(--success); color: white; width: 100%; margin-top: 10px; }
        .btn-delete { background-color: #fee2e2; color: var(--danger); padding: 6px 12px; border-radius: 6px; }
        .btn-delete:hover { background-color: var(--danger); color: white; }

        /* Semester Card */
        .semester-card {
            background: var(--white);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }

        .semester-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--bg-color);
            padding-bottom: 15px;
        }

        .semester-title { font-size: 1.2em; font-weight: bold; color: var(--primary-color); }
        
        .semester-stats { 
            text-align: right; 
            font-size: 0.95em;
        }
        
        .stat-badge {
            display: inline-block;
            background: #eff6ff;
            color: var(--primary-color);
            padding: 5px 10px;
            border-radius: 6px;
            font-weight: bold;
            margin-left: 10px;
        }

        .rank-badge {
            background: #fdf4ff;
            color: #d946ef;
        }

        /* Table */
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 12px; color: #64748b; font-size: 0.9em; border-bottom: 1px solid var(--border); }
        td { padding: 10px; border-bottom: 1px solid var(--bg-color); }
        
        input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            box-sizing: border-box;
            transition: border-color 0.2s;
        }
        input:focus { outline: none; border-color: var(--primary-color); }
        input[type="number"] { text-align: center; font-weight: 500; }

        /* Final Result Footer */
        #final-result {
            position: sticky;
            bottom: 20px;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.2);
            animation: slideUp 0.3s ease-out;
            border: 1px solid rgba(255,255,255,0.1);
        }

        @keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .result-item { text-align: center; }
        .result-label { display: block; font-size: 0.8em; opacity: 0.8; margin-bottom: 5px; }
        .result-value { font-size: 1.5em; font-weight: bold; color: #fbbf24; }
        .result-rank { color: #f472b6; }
    </style>
</head>
<body>

    <h1>Công cụ tính GPA & Tra cứu môn học</h1>

    <div class="controls">
        <button class="btn-add-sem" onclick="addSemester()">+ Thêm Học Kỳ</button>
        <button class="btn-reset" onclick="resetAll()">Làm mới</button>
    </div>

    <datalist id="subject-list">
        <option value="Triết học Mác - Lênin">
        <option value="Kinh tế chính trị Mác - Lênin">
        <option value="Chủ nghĩa xã hội khoa học">
        <option value="Lịch sử Đảng Cộng sản Việt Nam">
        <option value="Tư tưởng Hồ Chí Minh">
        <option value="Pháp luật đại cương">
        <option value="Logic học">
        <option value="Đổi mới sáng tạo và khởi nghiệp">
        <option value="Phương pháp nghiên cứu khoa học">
        <option value="Kỹ năng ứng dụng công nghệ thông tin">

        <option value="Anh văn 1">
        <option value="Anh văn 2">
        <option value="Anh văn 3">
        <option value="Giáo dục thể chất 1">
        <option value="Giáo dục thể chất 2">
        <option value="Giáo dục thể chất 3">
        <option value="Giáo dục quốc phòng - an ninh 1">
        <option value="Giáo dục quốc phòng - an ninh 2">
        <option value="Giáo dục quốc phòng - an ninh 3">
        <option value="Giáo dục quốc phòng - an ninh 4">

        <option value="Giải tích">
        <option value="Đại số tuyến tính">
        <option value="Xác suất và thống kê trong sản xuất, công nghệ, kỹ thuật">
        <option value="Cấu trúc rời rạc">
        <option value="Quy hoạch thực nghiệm">

        <option value="Nhập môn lập trình (C/C++)">
        <option value="Kỹ thuật lập trình">
        <option value="Thực hành Kỹ thuật lập trình">
        <option value="Nguyên lý ngôn ngữ lập trình">
        <option value="Thực hành Nguyên lý ngôn ngữ lập trình">
        <option value="Cấu trúc dữ liệu và Giải thuật">
        <option value="Thực hành Cấu trúc dữ liệu và Giải thuật">
        <option value="Lập trình hướng đối tượng">
        <option value="Thực hành Lập trình hướng đối tượng">
        <option value="Kiến trúc máy tính">
        <option value="Hệ điều hành">
        <option value="Mạng máy tính">
        <option value="Thực hành Mạng máy tính">
        <option value="Hệ cơ sở dữ liệu">
        <option value="Thực hành Hệ cơ sở dữ liệu">
        <option value="Hệ quản trị Cơ sở dữ liệu">
        
        <option value="Công nghệ phần mềm">
        <option value="Công nghệ phần mềm nâng cao">
        <option value="Phân tích thiết kế hệ thống">
        <option value="Thực hành Phân tích thiết kế hệ thống">
        <option value="Phân tích thiết kế thuật toán">
        <option value="Kiểm định phần mềm">
        <option value="Bảo mật máy tính">
        <option value="An toàn mạng máy tính">
        <option value="Thực hành An toàn mạng máy tính">
        <option value="Bảo mật Cơ sở dữ liệu">
        <option value="Mã hóa và ứng dụng">
        <option value="Quản trị hệ thống mạng">
        <option value="Thực hành Quản trị hệ thống mạng">
        
        <option value="Thiết kế Web">
        <option value="Lập trình Web">
        <option value="Thực hành Lập trình Web">
        <option value="Lập trình di động">
        <option value="Lập trình Python">
        <option value="Công nghệ Java">
        <option value="Công nghệ .NET">
        <option value="Lập trình mã nguồn mở">
        <option value="Lập trình mạng">
        <option value="Thương mại điện tử">
        <option value="Internet of Things">
        <option value="Ảo hóa và điện toán đám mây">
        <option value="Chuyên đề công nghệ mới và chuyển đổi số">

        <option value="Trí tuệ nhân tạo">
        <option value="Thực hành Trí tuệ nhân tạo">
        <option value="Học máy nâng cao">
        <option value="Deep learning">
        <option value="Thực hành Deep learning">
        <option value="Khai phá dữ liệu">
        <option value="Nhập môn Big Data">
        <option value="Thực hành Nhập môn Big Data">
        <option value="Xử lý ảnh">
        <option value="Dữ liệu NoSQL">

        <option value="Thực tập nghề nghiệp">
        <option value="Thực tập kỹ sư">
        <option value="Công tác kỹ sư">
        <option value="Khóa luận cử nhân">
        <option value="Khóa luận kỹ sư">
    </datalist>

    <div id="semesters-container"></div>

    <div id="final-result" style="display:none;">
        <div class="result-item">
            <span class="result-label">Tín chỉ tích lũy</span>
            <span class="result-value" id="total-credits">0</span>
        </div>
        <div class="result-item">
            <span class="result-label">GPA Tích lũy (Hệ 4)</span>
            <span class="result-value" id="total-gpa">0.00</span>
        </div>
        <div class="result-item">
            <span class="result-label">Xếp loại học lực</span>
            <span class="result-value result-rank" id="total-rank">---</span>
        </div>
    </div>

    <script>
        let semesterCount = 0;

        function convertScore(score10) {
            let s = parseFloat(score10);
            if (isNaN(s)) return { scale4: 0, letter: '' };
            if (s >= 8.5) return { scale4: 4.0, letter: 'A' };
            if (s >= 8.0) return { scale4: 3.5, letter: 'B+' };
            if (s >= 7.0) return { scale4: 3.0, letter: 'B' };
            if (s >= 6.5) return { scale4: 2.5, letter: 'C+' };
            if (s >= 5.5) return { scale4: 2.0, letter: 'C' };
            if (s >= 5.0) return { scale4: 1.5, letter: 'D+' };
            if (s >= 4.0) return { scale4: 1.0, letter: 'D' };
            return { scale4: 0, letter: 'F' };
        }

        function getRank(gpa) {
            if (gpa >= 3.60) return "Xuất sắc";
            if (gpa >= 3.20) return "Giỏi";
            if (gpa >= 2.50) return "Khá";
            if (gpa >= 2.00) return "Trung bình";
            if (gpa > 0) return "Yếu";
            return "---";
        }

        function addSemester() {
            semesterCount++;
            const container = document.getElementById('semesters-container');
            const div = document.createElement('div');
            div.className = 'semester-card';
            div.innerHTML = `
                <div class="semester-header">
                    <span class="semester-title">Học kỳ ${semesterCount}</span>
                    <div class="semester-stats">
                        <span class="stat-badge">GPA: <span id="sem-gpa-${semesterCount}">0.00</span></span>
                        <span class="stat-badge rank-badge" id="sem-rank-${semesterCount}">---</span>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th style="width: 35%">Tên môn học</th>
                            <th style="width: 15%">Số TC</th>
                            <th style="width: 15%">Điểm (10)</th>
                            <th style="width: 10%">Hệ 4</th>
                            <th style="width: 10%">Chữ</th>
                            <th style="width: 10%">Xóa</th>
                        </tr>
                    </thead>
                    <tbody id="tbody-${semesterCount}"></tbody>
                </table>
                <button class="btn-add-subject" onclick="addSubject(${semesterCount})">+ Thêm môn học</button>
            `;
            container.appendChild(div);
            addSubject(semesterCount);
        }

        function addSubject(semId) {
            const tbody = document.getElementById(`tbody-${semId}`);
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="text" list="subject-list" placeholder="Nhập hoặc chọn môn..."></td>
                <td><input type="number" class="input-credit" min="0" oninput="calculateAll()"></td>
                <td><input type="number" class="input-score" min="0" max="10" step="0.1" oninput="calculateAll()"></td>
                <td class="cell-scale4" style="text-align:center; font-weight:bold">-</td>
                <td class="cell-letter" style="text-align:center; font-weight:bold">-</td>
                <td style="text-align:center"><button class="btn-delete" onclick="deleteRow(this)">✕</button></td>
            `;
            tbody.appendChild(row);
        }

        function deleteRow(btn) {
            btn.closest('tr').remove();
            calculateAll();
        }

        function calculateAll() {
            let totalPoints = 0;
            let totalCredits = 0;
            let hasData = false;

            document.querySelectorAll('.semester-card').forEach((sem, index) => {
                let semPoints = 0;
                let semCredits = 0;
                const semId = index + 1;

                sem.querySelectorAll('tbody tr').forEach(row => {
                    const creditVal = parseFloat(row.querySelector('.input-credit').value);
                    const scoreVal = parseFloat(row.querySelector('.input-score').value);

                    if (!isNaN(creditVal) && !isNaN(scoreVal)) {
                        hasData = true;
                        const converted = convertScore(scoreVal);
                        
                        row.querySelector('.cell-scale4').innerText = converted.scale4;
                        row.querySelector('.cell-letter').innerText = converted.letter;

                        semPoints += converted.scale4 * creditVal;
                        semCredits += creditVal;
                    } else {
                        row.querySelector('.cell-scale4').innerText = '-';
                        row.querySelector('.cell-letter').innerText = '-';
                    }
                });

                const semGpa = semCredits > 0 ? (semPoints / semCredits) : 0;
                document.getElementById(`sem-gpa-${semId}`).innerText = semGpa.toFixed(2);
                document.getElementById(`sem-rank-${semId}`).innerText = semCredits > 0 ? getRank(semGpa) : "---";

                totalPoints += semPoints;
                totalCredits += semCredits;
            });

            const finalDiv = document.getElementById('final-result');
            if (hasData) {
                finalDiv.style.display = 'flex';
                const finalGpa = totalCredits > 0 ? (totalPoints / totalCredits) : 0;
                
                document.getElementById('total-credits').innerText = totalCredits;
                document.getElementById('total-gpa').innerText = finalGpa.toFixed(2);
                document.getElementById('total-rank').innerText = getRank(finalGpa);
            }
        }

        function resetAll() {
            if(confirm("Xóa toàn bộ dữ liệu?")) {
                document.getElementById('semesters-container').innerHTML = '';
                document.getElementById('final-result').style.display = 'none';
                semesterCount = 0;
                addSemester();
            }
        }

        addSemester();
    </script>
</body>
</html>

```